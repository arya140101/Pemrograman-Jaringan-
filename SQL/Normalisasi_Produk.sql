use Normalisasi_19205002_Azarya_Divino;

create table utama_Produk_Azarya_Divino_19205002(
	NO_FAKTUR CHAR(6),
	TGL DATE,
	KODE_PELANGGAN CHAR(6),
	NAMA_PELANGGAN VARCHAR(100),
	KODE_BARANG CHAR(6),
	NAMA_BARANG VARCHAR(50),
	HARGA DECIMAL,
	Qty VARCHAR(8)
);

--memasukan data

INSERT INTO utama_Produk_Azarya_Divino_19205002 (NO_FAKTUR,TGL,KODE_PELANGGAN,NAMA_PELANGGAN,KODE_BARANG,NAMA_BARANG,HARGA,Qty) VALUES 
('F-001','2021-09-18','P-001','Azarya Divino','B-001','Sabun Colek','8900','3 PCS'),
('F-001','2021-09-18','P-001','Azarya Divino','B-002','Rinso','18000','1 PCS'),
('F-002','2021-09-19','P-002','Benjamin Arguero','B-003','Kue Nastar','45000','1 PCS'),
('F-002','2021-09-19','P-002','Benjamin Arguero','B-002','Rinso','18000','1 PCS');

--menampilkan data tabel utama
select * from utama_Produk_Azarya_Divino_19205002;

CREATE TABLE TRANSAKSI(
	NO_FAKTUR CHAR(6),
	TGL DATE,
	KODE_PELANGGAN CHAR(6)
	primary key (NO_FAKTUR)
);
INSERT INTO TRANSAKSI (NO_FAKTUR,TGL,KODE_PELANGGAN) VALUES 
('F-001','2021-09-18','P-001'),
('F-002','2021-09-19','P-002');

--menampilkan table Transaksi
select * from TRANSAKSI;

CREATE TABLE PELANGGAN (
	KODE_PELANGGAN CHAR(6),
	NAMA_PELANGGAN VARCHAR(100)
	primary key (KODE_PELANGGAN)
);

INSERT INTO PELANGGAN (KODE_PELANGGAN,NAMA_PELANGGAN) VALUES 
('P-001','Azarya Divino'),
('P-002','Benjamin Arguero');

--menampilkan table PELANGGAN
select * from PELANGGAN;

CREATE TABLE BARANG (
	
	KODE_BARANG CHAR(6),
	NAMA_BARANG VARCHAR(50),
	HARGA DECIMAL,
	primary key (KODE_BARANG)
);

--MEMASUKAN DATA KE TABEL BARANG

INSERT INTO BARANG (KODE_BARANG,NAMA_BARANG,HARGA) VALUES 
('B-001','Sabun Colek','8900'),
('B-002','Rinso','18000'),
('B-003','Kue Nastar','45000');

--menampilkan table BARANG
select * from BARANG;

--BUAT TABLE DETAIL

CREATE TABLE DETAIL (

	NO_FAKTUR CHAR(6),
	KODE_BARANG CHAR(6),
	Qty VARCHAR(10)

);

--MEMASUKAN DATA KE TABEL DETAIL

INSERT INTO DETAIL(NO_FAKTUR,KODE_BARANG,Qty) VALUES 
('F-001','B-001','3 PCS'),
('F-001','B-002','1 PCS'),
('F-002','B-003','1 PCS'),
('F-002','B-002','1 PCS');

--MENAMPILKAN TABEL DETAIL
SELECT * FROM DETAIL;

--RELASI (PELANGGAN - TRANSAKSI)
ALTER TABLE TRANSAKSI
ADD CONSTRAINT FKPELANGGAN foreign key (KODE_PELANGGAN)
REFERENCES PELANGGAN (KODE_PELANGGAN);

--RELASI (DETAIL - TRANSAKSI)
ALTER TABLE DETAIL
ADD CONSTRAINT FKTRANSAKSI foreign key (NO_FAKTUR)
REFERENCES TRANSAKSI (NO_FAKTUR);

--RELASI (DETAIL - BARANG)
ALTER TABLE DETAIL
ADD CONSTRAINT FKBARANG foreign key (KODE_BARANG)
REFERENCES BARANG (KODE_BARANG);